# Система учета и управления тренировочной деятельностью WorkoutTracker

## Введение в проблематику и обоснование необходимости разработки информационной системы

В современных условиях стремительного развития информационных технологий и повсеместной цифровизации всех аспектов человеческой деятельности вопрос автоматизации процессов учета и управления тренировочной деятельностью приобретает особую актуальность и значимость. Данная информационная система предназначена для комплексного решения задач в области организации и контроля за выполнением физических упражнений, ведения подробного учета тренировочных сессий, формирования аналитических отчетов и обеспечения систематизированного хранения информации о достижениях пользователей в процессе их спортивной деятельности.

Настоящий программный продукт представляет собой полнофункциональную веб-ориентированную информационную систему, реализованную в рамках курсового проектирования с использованием современных технологических решений и лучших практик разработки веб-приложений. В ходе проектирования и реализации системы были учтены многочисленные требования к функциональности, безопасности, удобству использования и масштабируемости приложения, что позволило создать надежный и эффективный инструмент для управления тренировочным процессом.

Основополагающей целью разработки данной информационной системы является предоставление пользователям удобного и интуитивно понятного инструментария для ведения детального учета своих тренировочных достижений, планирования будущих тренировочных сессий, анализа динамики прогресса в различных упражнениях, а также для осуществления обмена информацией о методиках тренировок посредством механизма публичных упражнений. Система обеспечивает надежное хранение всей информации в централизованной базе данных с возможностью гибкого управления правами доступа различных категорий пользователей.

Применение данной информационной системы способствует существенному повышению эффективности тренировочного процесса за счет обеспечения систематического контроля над выполнением упражнений, отслеживания динамики изменения основных показателей физической подготовленности, формирования детализированных аналитических отчетов о достигнутых результатах, а также посредством создания благоприятных условий для осуществления долгосрочного планирования тренировочной деятельности на основе накопленных статистических данных.

## Подробное описание функциональных возможностей информационной системы

Настоящая информационная система WorkoutTracker обладает обширным спектром функциональных возможностей, которые в своей совокупности обеспечивают комплексное решение задач учета и управления тренировочным процессом. В рамках функционирования системы пользователям предоставляется возможность осуществления следующих операций и действий:

### Управление учетными записями пользователей и аутентификация

В целях обеспечения безопасности данных и разграничения прав доступа к функциональным возможностям системы реализован полноценный механизм регистрации новых пользователей с последующей аутентификацией посредством проверки учетных данных. Процесс регистрации включает в себя валидацию всех вводимых пользователем данных согласно установленным в системе требованиям безопасности, что гарантирует создание только корректных учетных записей с надежными паролями.

### Ведение справочника упражнений

Система предоставляет возможность создания и поддержания актуального справочника физических упражнений, который может включать в себя как публичные упражнения, доступные для просмотра всем пользователям системы, так и личные упражнения, видимые исключительно их владельцам. Каждое упражнение в справочнике характеризуется набором атрибутов, включающих наименование упражнения, детальное текстовое описание техники выполнения, указание целевой группы мышц, информацию о необходимом оборудовании, а также уровень сложности выполнения данного упражнения.

### Учет тренировочных сессий

Пользователи системы имеют возможность осуществлять детальный учет своих тренировочных сессий посредством создания записей о тренировках с указанием даты проведения тренировки, её типа согласно принятой классификации, продолжительности в минутах, а также текстовых заметок произвольного содержания. В рамках каждой отдельной тренировки пользователь может фиксировать выполнение множества различных упражнений с детализацией параметров выполнения каждого из них.

### Детализация параметров выполнения упражнений

Для каждого упражнения, включенного в состав конкретной тренировки, система обеспечивает возможность фиксации детальных параметров его выполнения, в число которых входят: количество выполненных подходов, число повторений в каждом подходе, используемый рабочий вес в килограммах для силовых упражнений, продолжительность выполнения в секундах для статических упражнений, преодоленная дистанция в километрах для кардионагрузок, а также дополнительные текстовые примечания к выполнению упражнения.

### Работа с файловыми вложениями

В целях обогащения информационного наполнения системы и обеспечения возможности сохранения визуальных материалов реализован функционал работы с файловыми вложениями, позволяющий пользователям прикреплять к упражнениям файлы различных типов и форматов. Система поддерживает загрузку изображений в форматах PNG, JPG и JPEG для визуального представления техники выполнения упражнений, PDF-документов для хранения программ тренировок и методических материалов, а также текстовых файлов форматов TXT, CSV и JSON для хранения структурированных данных.

### Формирование аналитических отчетов

Для осуществления анализа эффективности тренировочного процесса и отслеживания динамики прогресса система предоставляет возможность формирования детализированных аналитических отчетов с использованием данных о выполненных тренировках за произвольный период времени. Отчеты могут быть экспортированы в формат CSV для последующей обработки и анализа в специализированных офисных приложениях таких как Microsoft Excel или LibreOffice Calc.

### Экспорт данных в архивы

Система обеспечивает возможность полного экспорта информации о тренировках и упражнениях в формате ZIP-архивов, что позволяет пользователям создавать резервные копии своих данных и осуществлять перенос информации между различными экземплярами системы или хранить данные в автономном режиме для последующего использования.

## Технологический стек и обоснование выбора используемых технологий

В рамках разработки настоящей информационной системы был применен тщательно подобранный набор современных программных технологий и инструментальных средств, обеспечивающих эффективную реализацию всех требуемых функциональных возможностей при соблюдении высоких стандартов качества программного кода и архитектурных решений.

### Backend-компоненты серверной части приложения

**Flask версии 3.1.0** - микрофреймворк для разработки веб-приложений на языке программирования Python, выбранный в качестве основы серверной части системы благодаря своей гибкости, простоте освоения, обширной экосистеме расширений и возможности быстрого прототипирования функциональности. Flask предоставляет минималистичный но при этом мощный набор инструментов для обработки HTTP-запросов, управления сессиями пользователей, рендеринга HTML-шаблонов и интеграции с системами управления базами данных.

**SQLAlchemy версии 3.1.1** - объектно-реляционный преобразователь (ORM) для языка Python, обеспечивающий высокоуровневый интерфейс для взаимодействия с реляционными базами данных посредством объектно-ориентированного программирования без необходимости написания низкоуровневого SQL-кода. Применение SQLAlchemy позволяет создавать надежные и легко поддерживаемые модели данных с автоматическим управлением отношениями между сущностями.

**Flask-Login версии 0.6.3** - расширение для Flask, предоставляющее готовые решения для управления пользовательскими сессиями и реализации механизмов аутентификации. Данная библиотека обеспечивает безопасное хранение информации о текущем пользователе, управление процессом входа и выхода из системы, а также защиту маршрутов от несанкционированного доступа посредством декораторов.

**Werkzeug версии 3.1.3** - комплексная библиотека утилит для WSGI-приложений, используемая в проекте для обеспечения безопасного хеширования паролей пользователей с применением криптографически стойких алгоритмов, что гарантирует невозможность восстановления исходных паролей даже в случае компрометации базы данных.

**Faker версии 33.1.0** - библиотека для генерации реалистичных тестовых данных, применяемая в процессе разработки и демонстрации возможностей системы для автоматического создания правдоподобной информации о пользователях, упражнениях и тренировках в демонстрационных целях.

### Система управления базами данных

**SQLite версии 3** - встраиваемая реляционная система управления базами данных, выбранная для данного проекта в силу её простоты развертывания, отсутствия необходимости в отдельном серверном процессе, достаточной производительности для задач учебного и демонстрационного характера, а также благодаря полной совместимости с ORM SQLAlchemy и возможности легкого переноса данных посредством простого копирования файла базы данных.

### Frontend-компоненты клиентской части

**Jinja2 версии 3.1.4** - мощный и широко распространенный шаблонизатор для языка Python, интегрированный во фреймворк Flask и используемый для генерации динамического HTML-контента на стороне сервера с применением механизма наследования шаблонов, циклов, условных конструкций и фильтров обработки данных.

**Bootstrap версии 5.3** - популярный CSS-фреймворк с открытым исходным кодом, предоставляющий готовые стилевые компоненты и адаптивную сетку для создания современных и визуально привлекательных пользовательских интерфейсов, корректно отображающихся на устройствах с различными размерами экранов.

### Дополнительные инструментальные средства

**Python версии 3.9 и выше** - объектно-ориентированный язык программирования высокого уровня, выбранный в качестве основного языка разработки благодаря его читаемости, обширной стандартной библиотеке, богатой экосистеме сторонних пакетов и широкому применению в области веб-разработки.

## Системные требования для функционирования информационной системы

Для обеспечения корректного функционирования настоящей информационной системы необходимо наличие программно-аппаратной платформы, удовлетворяющей следующим минимальным системным требованиям:

### Требования к программному обеспечению

В целях успешного развертывания и эксплуатации информационной системы на целевой вычислительной машине должны быть установлены следующие компоненты программного обеспечения:

- **Интерпретатор языка Python** версии 3.9 или более поздней версии, обеспечивающий выполнение программного кода серверной части приложения
- **Система управления пакетами pip** для автоматизированной установки требуемых зависимостей и библиотек из репозитория PyPI
- **Веб-браузер современной версии** (рекомендуется использование последних версий Google Chrome, Mozilla Firefox, Microsoft Edge или Safari) для обеспечения корректного отображения пользовательского интерфейса системы

### Требования к аппаратному обеспечению

Минимальные характеристики аппаратного обеспечения для развертывания системы в целях разработки и тестирования:

- **Центральный процессор** с тактовой частотой не менее 1 ГГц и поддержкой архитектуры x86-64 или ARM64
- **Оперативная память** объемом не менее 2 ГБ (рекомендуется 4 ГБ и более для комфортной работы)
- **Дисковое пространство** не менее 500 МБ свободного места для размещения файлов приложения, базы данных и загружаемых пользовательских файлов

### Сетевые требования

Для обеспечения доступа к веб-интерфейсу информационной системы необходимо наличие сетевого подключения и доступность TCP-порта 8080 на локальной машине. В случае развертывания системы в производственной среде требуется обеспечить доступность соответствующих портов через сетевой экран и маршрутизатор.

## Детальное руководство по установке и запуску информационной системы

Процесс развертывания информационной системы WorkoutTracker на целевой вычислительной машине включает в себя выполнение последовательности шагов, подробно описанных в настоящем разделе документации.

### Этап 1: Клонирование репозитория исходного кода

На первоначальном этапе необходимо осуществить получение исходного кода приложения из системы контроля версий Git посредством выполнения операции клонирования репозитория. Данная операция создаст локальную копию всех файлов проекта на вашей вычислительной машине.

Для осуществления клонирования репозитория следует открыть терминал командной строки и выполнить следующую команду:

```bash
git clone https://github.com/your-username/WorkoutTracker.git
```

После успешного завершения операции клонирования необходимо осуществить переход в директорию созданного проекта посредством выполнения команды смены текущего рабочего каталога:

```bash
cd WorkoutTracker
```

### Этап 2: Создание изолированного виртуального окружения Python

В целях предотвращения возможных конфликтов между зависимостями различных проектов и обеспечения изолированности окружения настоящего проекта настоятельно рекомендуется создать виртуальное окружение Python. Виртуальное окружение представляет собой изолированную среду выполнения со своим собственным набором установленных пакетов, не влияющим на глобальную установку Python в операционной системе.

Для создания виртуального окружения с использованием встроенного модуля venv следует выполнить следующую команду в терминале:

```bash
python -m venv venv
```

Данная команда создаст в текущем каталоге директорию с именем venv, содержащую все необходимые файлы изолированного окружения Python.

После успешного создания виртуального окружения необходимо осуществить его активацию для того чтобы все последующие операции по установке пакетов и запуску приложения выполнялись именно в контексте этого изолированного окружения.

Процедура активации виртуального окружения зависит от используемой операционной системы:

**Для операционных систем семейства Linux и macOS:**

```bash
source venv/bin/activate
```

**Для операционной системы Windows:**

```bash
venv\Scripts\activate
```

После успешной активации виртуального окружения в приглашении командной строки появится префикс (venv), свидетельствующий о том что вы работаете в контексте виртуального окружения.

### Этап 3: Установка программных зависимостей проекта

На данном этапе необходимо осуществить установку всех программных библиотек и пакетов, от которых зависит функционирование информационной системы. Полный перечень требуемых зависимостей с указанием их версий содержится в файле requirements.txt в корневой директории проекта.

Для автоматизированной установки всех зависимостей следует выполнить следующую команду с использованием системы управления пакетами pip:

```bash
pip install -r requirements.txt
```

Система pip автоматически загрузит из репозитория PyPI все необходимые пакеты и их транзитивные зависимости, после чего установит их в активированное виртуальное окружение. Процесс установки может занять некоторое время в зависимости от скорости интернет-соединения и производительности вычислительной машины.

### Этап 4: Инициализация базы данных и создание структуры таблиц

Перед первым запуском приложения необходимо осуществить инициализацию базы данных, в процессе которой будут созданы все необходимые таблицы для хранения информации о пользователях, ролях, упражнениях, тренировках и файловых вложениях. Процесс инициализации также включает в себя создание предопределенных ролей пользователей и тестовой учетной записи администратора системы.

Для выполнения инициализации базы данных достаточно осуществить первый запуск основного файла приложения, который автоматически выполнит все необходимые операции по созданию структуры базы данных:

```bash
python app.py
```

В процессе первого запуска приложение создаст файл базы данных SQLite с именем workout_tracker.db в корневой директории проекта, создаст все необходимые таблицы согласно определенным в коде моделям данных, заполнит таблицу ролей тремя предопределенными ролями (viewer, editor, admin), а также создаст тестовую учетную запись администратора с учетными данными для входа в систему.

После успешного запуска приложение будет доступно по адресу http://localhost:8080 в вашем веб-браузере.

Для остановки работы приложения следует нажать комбинацию клавиш Ctrl+C в окне терминала.

### Этап 5: Заполнение базы данных демонстрационными данными

В целях облегчения процесса ознакомления с функциональными возможностями информационной системы и демонстрации её работы на реалистичных данных в составе проекта предусмотрен специализированный скрипт seed.py, предназначенный для автоматической генерации демонстрационных данных с использованием библиотеки Faker.

Данный скрипт осуществляет создание множества тестовых пользователей с различными ролями в системе, генерацию разнообразных упражнений для всех основных групп мышц, формирование истории тренировок за последние три месяца с реалистичными параметрами выполнения упражнений, а также создание примеров файловых вложений различных типов.

Для запуска процесса генерации демонстрационных данных необходимо выполнить следующую команду в терминале при активированном виртуальном окружении:

```bash
python seed.py
```

Скрипт выведет в консоль детальную информацию о процессе создания данных, включая создаваемые учетные записи пользователей с их учетными данными для входа в систему, генерируемые упражнения, тренировки и файловые вложения. По завершении работы скрипта будет выведена сводная статистика созданных объектов и перечень учетных данных для входа в систему под различными учетными записями пользователей.

**Учетные данные для входа после выполнения seed.py:**

- **Администратор:** admin / Admin123
- **Тренер 1:** trainer1 / Trainer123
- **Тренер 2:** trainer2 / Trainer223
- **Пользователи:** user1 / User1Pass, user2 / User2Pass, user3 / User3Pass, user4 / User4Pass

### Этап 6: Повторный запуск приложения для работы с системой

После успешного заполнения базы данных демонстрационными данными можно осуществить повторный запуск приложения для начала работы с полноценно функционирующей системой:

```bash
python app.py
```

Приложение будет запущено в режиме разработки с включенной автоматической перезагрузкой при изменении исходного кода и подробным выводом отладочной информации. Доступ к веб-интерфейсу системы осуществляется посредством открытия в веб-браузере адреса http://localhost:8080 или http://127.0.0.1:8080.

Для входа в систему можно использовать любую из учетных записей, созданных скриптом seed.py, учетные данные которых были выведены в консоль по завершении его работы.

### Этап 7: Выполнение автоматизированных тестов системы

В случае если в составе проекта присутствуют автоматизированные тесты для проверки корректности функционирования различных компонентов системы, их выполнение может быть осуществлено посредством использования фреймворка pytest. Для запуска всего набора тестов следует выполнить в терминале следующую команду:

```bash
pytest
```

Для получения более детального вывода информации о выполнении каждого отдельного теста можно использовать режим verbose посредством добавления флага -v:

```bash
pytest -v
```

В случае если тесты организованы в отдельной директории tests, можно явно указать путь к ней при запуске pytest.

## Подробная структура проекта с описанием назначения каждого компонента

Структура директорий и файлов настоящего проекта организована в соответствии с общепринятыми практиками разработки веб-приложений на фреймворке Flask и обеспечивает логическое разделение различных типов компонентов системы. Ниже представлено детальное описание назначения каждого элемента структуры проекта.

```
WorkoutTracker/
├── app.py                          # Главный файл приложения содержащий инициализацию Flask
│                                   # регистрацию blueprints настройку Flask-Login
│                                   # определение основных маршрутов аутентификации
│                                   # и функцию инициализации базы данных
│
├── config.py                       # Конфигурационный файл содержащий класс Config
│                                   # со всеми настройками приложения включая
│                                   # параметры подключения к базе данных
│                                   # настройки безопасности ограничения загрузки файлов
│                                   # и параметры пагинации
│
├── models.py                       # Модели данных SQLAlchemy определяющие структуру
│                                   # всех таблиц базы данных включая модели Role User
│                                   # Exercise Workout WorkoutExercise и Attachment
│                                   # с полным описанием всех полей связей и методов
│
├── seed.py                         # Скрипт для автоматической генерации демонстрационных
│                                   # данных с использованием библиотеки Faker создающий
│                                   # пользователей разных ролей публичные и личные упражнения
│                                   # историю тренировок за последние три месяца
│                                   # и примеры файловых вложений
│
├── requirements.txt                # Файл содержащий полный перечень Python-пакетов
│                                   # необходимых для функционирования системы
│                                   # с указанием конкретных версий каждой зависимости
│                                   # для обеспечения воспроизводимости окружения
│
├── routes/                         # Директория содержащая модули с определением
│                                   # маршрутов приложения организованные в виде
│                                   # Flask blueprints для логического разделения
│                                   # функциональности системы
│   │
│   ├── __init__.py                 # Файл инициализации пакета routes делающий
│                                   # директорию Python-пакетом
│   │
│   ├── workouts.py                 # Blueprint для работы с тренировками включающий
│                                   # маршруты для создания просмотра редактирования
│                                   # и удаления тренировок а также добавления
│                                   # упражнений в состав тренировки
│   │
│   ├── exercises.py                # Blueprint для управления справочником упражнений
│                                   # содержащий маршруты для создания редактирования
│                                   # удаления и просмотра упражнений с поддержкой
│                                   # публичных и личных упражнений
│   │
│   ├── reports.py                  # Blueprint для формирования аналитических отчетов
│                                   # реализующий отчет по объему тренировок за период
│                                   # и отчет по динамике личных рекордов
│                                   # с возможностью экспорта в формат CSV
│   │
│   └── files.py                    # Blueprint для работы с файловыми вложениями
│                                   # обеспечивающий загрузку удаление и экспорт файлов
│                                   # с валидацией типов и размеров файлов
│                                   # и формированием ZIP-архивов
│
├── templates/                      # Директория содержащая HTML-шаблоны Jinja2
│                                   # для генерации пользовательского интерфейса
│   │
│   ├── base.html                   # Базовый шаблон определяющий общую структуру
│                                   # всех страниц приложения включая навигационное меню
│                                   # подключение стилей и скриптов а также блоки
│                                   # для вывода flash-сообщений
│   │
│   ├── dashboard.html              # Шаблон главной панели управления пользователя
│                                   # отображающий сводную статистику и быстрый доступ
│                                   # к основным функциям системы
│   │
│   ├── auth/                       # Поддиректория с шаблонами для аутентификации
│   │   ├── login.html              # Форма входа в систему с полями для ввода
│   │   │                           # имени пользователя и пароля
│   │   └── register.html           # Форма регистрации нового пользователя
│   │                               # с валидацией введенных данных
│   │
│   ├── workouts/                   # Поддиректория с шаблонами для работы с тренировками
│   │   ├── list.html               # Список всех тренировок пользователя
│   │   │                           # с возможностью фильтрации и сортировки
│   │   ├── detail.html             # Детальный просмотр тренировки со списком
│   │   │                           # всех выполненных упражнений
│   │   ├── create.html             # Форма создания новой тренировки
│   │   ├── edit.html               # Форма редактирования существующей тренировки
│   │   └── add_exercise.html       # Форма добавления упражнения в тренировку
│   │
│   ├── exercises/                  # Поддиректория с шаблонами для управления упражнениями
│   │   ├── list.html               # Список доступных упражнений с разделением
│   │   │                           # на публичные и личные упражнения
│   │   ├── detail.html             # Детальная информация об упражнении
│   │   │                           # включая прикрепленные файлы
│   │   ├── create.html             # Форма создания нового упражнения
│   │   └── edit.html               # Форма редактирования упражнения
│   │
│   └── reports/                    # Поддиректория с шаблонами для отчетов
│       ├── index.html              # Главная страница раздела отчетов со списком
│       │                           # доступных типов отчетов
│       ├── volume.html             # Отчет об объеме тренировок с таблицей данных
│       │                           # и формой для выбора периода анализа
│       └── records.html            # Отчет о личных рекордах с возможностью
│                                   # фильтрации по упражнениям
│
├── static/                         # Директория для статических файлов приложения
│   │                               # включая стили изображения и скрипты
│   │
│   ├── css/                        # Поддиректория с таблицами стилей CSS
│   │   └── style.css               # Основной файл стилей определяющий внешний вид
│   │                               # пользовательского интерфейса системы
│   │
│   ├── js/                         # Поддиректория с JavaScript-скриптами
│   │   └── app.js                  # Основной файл со скриптами для обеспечения
│   │                               # интерактивности пользовательского интерфейса
│   │
│   └── uploads/                    # Директория для хранения загруженных пользователями
│                                   # файловых вложений создается автоматически
│                                   # при первом запуске приложения
│
├── validators/                     # Директория содержащая модули с функциями
│                                   # для валидации пользовательского ввода
│   │
│   └── password_validator.py      # Модуль с функциями валидации паролей имен пользователей
│                                   # и адресов электронной почты обеспечивающий
│                                   # проверку соответствия требованиям безопасности
│
├── repositories/                   # Директория для модулей работы с данными
│                                   # реализующих паттерн Repository для абстрагирования
│                                   # логики доступа к данным от бизнес-логики
│
└── workout_tracker.db              # Файл базы данных SQLite создается автоматически
                                    # при первом запуске приложения и содержит
                                    # всю информацию о пользователях упражнениях
                                    # тренировках и файловых вложениях
```

## Подробное описание ролей пользователей и их полномочий в системе

В рамках функционирования информационной системы WorkoutTracker реализован механизм разграничения прав доступа к различным функциональным возможностям на основе ролевой модели управления доступом. Каждому пользователю системы при регистрации присваивается одна из предопределенных ролей, определяющая набор операций, которые данный пользователь имеет право выполнять в системе.

### Роль "Viewer" (Наблюдатель или Просмотрщик)

Роль viewer представляет собой базовый уровень доступа к функциональным возможностям системы и автоматически присваивается всем вновь зарегистрированным пользователям в процессе создания их учетных записей в системе. Пользователи с ролью viewer обладают ограниченным набором полномочий, ориентированным в первую очередь на возможность просмотра информации без внесения изменений в данные системы.

**Предоставляемые полномочия:**

- Просмотр полного справочника публичных упражнений, доступных всем пользователям системы, с возможностью ознакомления с детальным описанием техники выполнения, информацией о целевых группах мышц и необходимом оборудовании
- Просмотр детальной информации о каждом публичном упражнении включая прикрепленные к нему изображения, видеоматериалы и методические документы
- Просмотр собственного профиля пользователя с персональными данными и параметрами физической подготовленности
- Просмотр истории собственных тренировок с детализацией выполненных упражнений и их параметров

**Ограничения доступа:**

- Отсутствие возможности создания новых упражнений как публичных так и личных
- Невозможность редактирования существующих упражнений в справочнике системы
- Отсутствие прав на создание записей о тренировках и фиксацию выполненных упражнений
- Невозможность загрузки файловых вложений к упражнениям
- Отсутствие доступа к формированию аналитических отчетов о тренировочной деятельности

### Роль "Editor" (Редактор или Тренер)

Роль editor представляет собой расширенный уровень доступа, предназначенный для пользователей, которые осуществляют активное ведение учета своей тренировочной деятельности и создание контента в системе. Данная роль предоставляет полный набор функциональных возможностей для работы с собственными данными о тренировках и упражнениях.

**Предоставляемые полномочия:**

- Все полномочия роли viewer в полном объеме
- Создание новых записей о выполненных тренировках с указанием даты, типа тренировки, продолжительности и текстовых заметок
- Редактирование ранее созданных записей о тренировках с возможностью изменения всех параметров
- Удаление собственных тренировок из базы данных системы
- Добавление упражнений в состав тренировки с детализацией параметров выполнения каждого упражнения
- Создание новых упражнений в справочнике системы как личных видимых только владельцу так и публичных доступных всем пользователям
- Редактирование созданных данным пользователем упражнений с изменением всех атрибутов
- Удаление собственных упражнений из справочника системы
- Загрузка файловых вложений к упражнениям с соблюдением ограничений по типам и размерам файлов
- Удаление прикрепленных файлов от собственных упражнений
- Формирование аналитических отчетов по объему тренировок за произвольный период времени
- Формирование отчетов по динамике личных рекордов с возможностью фильтрации по упражнениям
- Экспорт отчетов в формат CSV для последующей обработки в офисных приложениях
- Экспорт тренировок и упражнений в формате ZIP-архивов для резервного копирования

**Ограничения доступа:**

- Отсутствие возможности редактирования или удаления упражнений, созданных другими пользователями системы
- Невозможность просмотра личных упражнений других пользователей системы
- Отсутствие доступа к тренировкам других пользователей
- Невозможность изменения структуры базы данных или настроек системы

### Роль "Admin" (Администратор системы)

Роль admin представляет собой наивысший уровень доступа в иерархии полномочий системы и предназначена для пользователей, осуществляющих администрирование и управление информационной системой в целом. Администраторы обладают полным набором прав доступа ко всем функциональным возможностям системы без каких-либо ограничений.

**Предоставляемые полномочия:**

- Все полномочия роли editor в полном объеме и без исключений
- Просмотр списка всех пользователей, зарегистрированных в системе, с детальной информацией об их учетных записях
- Редактирование учетных записей любых пользователей системы включая изменение их ролей и персональных данных
- Удаление учетных записей пользователей из системы с каскадным удалением всех связанных данных
- Редактирование и удаление любых упражнений в справочнике системы независимо от их владельца
- Управление публичными упражнениями включая преобразование личных упражнений в публичные и обратно
- Доступ к административной панели управления системой
- Выполнение операций по резервному копированию и восстановлению базы данных
- Просмотр системных логов и статистики использования системы

## Детальное описание формирования аналитических отчетов с формулами расчета показателей

Информационная система WorkoutTracker предоставляет пользователям с соответствующими полномочиями возможность формирования детализированных аналитических отчетов на основе накопленных данных о тренировочной деятельности. Все отчеты поддерживают экспорт результатов в формат CSV для последующей обработки в специализированных приложениях таких как Microsoft Excel или LibreOffice Calc.

### ОТЧЁТ 1: "Объём тренировок за период" (Workout Volume Report)

Данный аналитический отчет предназначен для получения агрегированной информации об общем объеме тренировочной нагрузки пользователя за указанный период времени с группировкой данных по типам тренировок. Отчет позволяет проанализировать распределение тренировочного времени и нагрузки между различными видами тренировочной деятельности.

**Параметры формирования отчета:**

- **date_from** - дата начала анализируемого периода в формате ГГГГ-ММ-ДД (по умолчанию: 30 дней назад от текущей даты)
- **date_to** - дата окончания анализируемого периода в формате ГГГГ-ММ-ДД (по умолчанию: текущая дата)

**Формулы расчета агрегированных показателей:**

В процессе формирования отчета для каждого типа тренировки осуществляется расчет следующих агрегированных показателей с использованием указанных математических формул:

1. **total_workouts = COUNT(workouts)** - общее количество тренировок данного типа

   Данная формула вычисляет общее количество тренировок данного конкретного типа, проведенных пользователем в течение указанного временного периода, посредством подсчета количества записей о тренировках, удовлетворяющих условиям фильтрации по типу и дате

2. **total_duration = SUM(duration)** - суммарная продолжительность всех тренировок в минутах

   Данная формула вычисляет суммарную продолжительность всех тренировок данного типа в минутах посредством суммирования значений поля duration для всех тренировок, соответствующих условиям отбора

3. **total_exercises = SUM(workout_exercises.sets × reps)** - общее количество выполненных упражнений

   Данная формула вычисляет общее количество выполненных повторений упражнений посредством суммирования произведений количества подходов на количество повторений для каждого упражнения во всех тренировках данного типа за период

4. **total_weight = SUM(workout_exercises.sets × reps × weight)** - суммарный поднятый вес в килограммах

   Данная формула вычисляет суммарный поднятый вес в килограммах посредством суммирования произведений количества подходов, количества повторений и рабочего веса для каждого силового упражнения во всех тренировках данного типа

**Структура CSV-файла при экспорте:**

CSV-файл формируется с использованием кодировки UTF-8 с маркером порядка байтов (BOM) для обеспечения корректного отображения символов кириллицы в приложении Microsoft Excel. В качестве разделителя полей используется символ точки с запятой (;) в соответствии с требованиями русской локали.

Схема CSV: **Тип тренировки; Количество тренировок; Общее время (мин); Всего упражнений; Общий вес (кг)**

Имя файла при экспорте формируется по шаблону: workout_volume_ГГГГ-ММ-ДД_ГГГГ-ММ-ДД.csv

### ОТЧЁТ 2: "Динамика личных рекордов" (Personal Records Dynamics Report)

Данный аналитический отчет предназначен для отслеживания максимальных достижений пользователя по каждому выполняемому упражнению за указанный период времени. Отчет позволяет проанализировать прогресс в развитии силовых показателей и выявить упражнения, по которым были достигнуты наилучшие результаты.

**Параметры формирования отчета:**

- **date_from** - дата начала анализируемого периода в формате ГГГГ-ММ-ДД (по умолчанию: 30 дней назад от текущей даты)
- **date_to** - дата окончания анализируемого периода в формате ГГГГ-ММ-ДД (по умолчанию: текущая дата)
- **exercise_id** - идентификатор упражнения для отображения данных только по одному конкретному упражнению (необязательный параметр)

**Формулы расчета максимальных показателей:**

Для каждого упражнения, выполнявшегося пользователем в течение указанного периода, осуществляется расчет следующих показателей:

1. **max_weight = MAX(weight) WHERE exercise_id = X AND date BETWEEN from AND to** - максимальный рабочий вес

   Данная формула определяет максимальный рабочий вес в килограммах, с которым пользователь выполнял данное упражнение в течение анализируемого периода, посредством нахождения максимального значения поля weight среди всех записей о выполнении упражнения

2. **max_reps = MAX(reps) WHERE weight = max_weight** - максимальное количество повторений с максимальным весом

   Данная формула определяет максимальное количество повторений, которое пользователь смог выполнить с максимальным рабочим весом, посредством нахождения максимального значения поля reps среди записей, в которых вес равен max_weight

**Структура CSV-файла при экспорте:**

CSV-файл формируется аналогично отчету по объему тренировок с использованием кодировки UTF-8 с BOM и разделителем в виде точки с запятой.

Схема CSV: **Дата; Упражнение; Макс вес (кг); Подходы; Повторения**

Имя файла при экспорте формируется по шаблону: personal_records_ГГГГ-ММ-ДД_ГГГГ-ММ-ДД.csv

## Подробное описание функционала загрузки файловых вложений

Информационная система WorkoutTracker предоставляет пользователям с ролью editor и admin возможность прикрепления файловых вложений к упражнениям в справочнике системы. Данная функциональность позволяет обогатить информацию об упражнениях визуальными материалами, методическими документами и структурированными данными.

### Разрешённые типы файлов для загрузки в систему

Система осуществляет строгую валидацию типов загружаемых файлов в целях обеспечения безопасности и предотвращения загрузки потенциально опасных исполняемых файлов. Перечень допустимых расширений файлов определен в конфигурационном модуле config.py и включает в себя следующие типы:

- **PNG** (Portable Network Graphics) - формат растровых изображений с поддержкой прозрачности
- **JPG / JPEG** (Joint Photographic Experts Group) - формат сжатых растровых изображений
- **PDF** (Portable Document Format) - формат электронных документов для методических материалов
- **TXT** (Plain Text) - формат простых текстовых файлов без форматирования
- **CSV** (Comma-Separated Values) - формат текстовых файлов для представления табличных данных
- **JSON** (JavaScript Object Notation) - формат текстовых файлов для хранения структурированных данных

### Ограничения по размерам загружаемых файлов

В целях предотвращения чрезмерного потребления дискового пространства сервера и обеспечения разумных ограничений на объем хранимых данных система устанавливает следующие лимиты на размеры загружаемых файлов:

**Максимальный размер одного отдельного файла:** 20 мегабайт (20 МБ или 20 971 520 байт)

Данное ограничение определено константой MAX_FILE_SIZE в конфигурационном файле config.py и обеспечивает возможность загрузки файлов достаточного размера для большинства практических применений при сохранении контроля над использованием дискового пространства.

**Максимальный суммарный размер всех файлов, прикрепленных к одному упражнению:** 100 мегабайт (100 МБ или 104 857 600 байт)

Данное ограничение определено константой MAX_TOTAL_SIZE в конфигурационном файле config.py и предотвращает возможность неограниченного накопления файлов при многократных загрузках к одному объекту.

При попытке загрузки файла, превышающего указанные лимиты, система отклоняет загрузку и отображает пользователю детальное информационное сообщение с указанием текущего размера файла, максимально допустимого размера и рекомендациями по дальнейшим действиям.

## Подробное описание функционала экспорта данных в ZIP-архивы

Для обеспечения возможности создания резервных копий данных и переноса информации между различными экземплярами системы реализован функционал экспорта тренировок и упражнений в формате ZIP-архивов, содержащих как структурированные данные в формате JSON, так и все прикрепленные файловые вложения.

### Структура ZIP-архива при экспорте тренировки

При осуществлении экспорта тренировки система формирует ZIP-архив со следующей иерархической структурой директорий и файлов:

```
workout_export_<id>_<timestamp>.zip
├── workout.json                    # JSON с данными тренировки
│   {
│       "id": <id>,
│       "date": "YYYY-MM-DD",
│       "workout_type": "Силовая/Кардио/Смешанная",
│       "duration": <minutes>,
│       "notes": "...",
│       "exercises": [
│           {
│               "exercise_id": <id>,
│               "name": "...",
│               "sets": <count>,
│               "reps": <count>,
│               "weight": <kg>,
│               "duration": <seconds>,
│               "distance": <km>,
│               "notes": "...",
│               "attachments": ["filename1.jpg", "filename2.pdf"]
│           }
│       ]
│   }
└── attachments/                    # Папка с файлами упражнений
    ├── <exercise_id>_<filename1>.jpg
    ├── <exercise_id>_<filename2>.pdf
    └── ...
```

**Содержимое директории attachments:**

В поддиректории attachments располагаются все файловые вложения, прикрепленные к упражнениям, входящим в состав экспортируемой тренировки. Имена файлов в архиве формируются по шаблону `<exercise_id>_<original_filename>` для обеспечения уникальности имен и возможности идентификации принадлежности файла к конкретному упражнению при последующем импорте данных.

Имя файла архива формируется по шаблону: workout_export_<id>_ГГГГММДД_ЧЧММСС.zip

### Структура ZIP-архива при экспорте упражнения

При экспорте упражнения формируется архив следующей структуры:

```
exercise_<id>_<timestamp>.zip
├── exercise.json  # Метаданные упражнения (id, name, description, muscle_group, equipment, difficulty)
└── attachments/   # Папка с прикрепленными файлами
    ├── file1.png
    ├── file2.pdf
    └── ...
```

## Подробное руководство по выполнению тестирования системы

В случае наличия в составе проекта автоматизированных тестов, предназначенных для проверки корректности функционирования различных компонентов информационной системы, их выполнение может быть осуществлено с использованием фреймворка pytest, представляющего собой мощный инструмент для организации и запуска тестов Python-приложений.

### Запуск полного набора тестов

Для выполнения всех имеющихся в проекте автоматизированных тестов необходимо в терминале командной строки при активированном виртуальном окружении перейти в корневую директорию проекта и выполнить следующую команду:

```bash
pytest
```

Фреймворк pytest автоматически обнаружит все файлы с именами, соответствующими паттерну test_*.py или *_test.py, и выполнит все содержащиеся в них тестовые функции, после чего выведет сводный отчет о результатах выполнения тестов.

### Запуск тестов с детальным выводом информации

Для получения более подробной информации о процессе выполнения каждого отдельного теста включая имена выполняемых тестовых функций и результаты их выполнения можно использовать режим verbose посредством добавления флага -v при запуске pytest:

```bash
pytest -v
```

В данном режиме для каждого выполняемого теста будет выведена отдельная строка с указанием полного имени теста и его статуса (PASSED для успешно пройденных тестов, FAILED для тестов завершившихся с ошибкой).

### Запуск конкретной категории тестов

В случае если тесты организованы в отдельной директории с именем tests или разделены по функциональным модулям можно осуществить запуск только определенной подгруппы тестов посредством явного указания пути к директории или файлу:

```bash
pytest tests/
```

или для запуска тестов из конкретного файла:

```bash
pytest tests/test_models.py
```

## Информация об авторе проекта и лицензионные условия использования

Настоящая информационная система WorkoutTracker была разработана в рамках выполнения курсового проекта студентом образовательного учреждения высшего профессионального образования в процессе освоения дисциплин, связанных с веб-разработкой и созданием информационных систем с использованием современных программных технологий и фреймворков.

### Автор проекта

Разработка данной информационной системы была осуществлена студентом в рамках курсового проектирования с целью демонстрации приобретенных знаний и практических навыков в области разработки полнофункциональных веб-приложений с использованием фреймворка Flask, системы управления базами данных SQLite, библиотеки SQLAlchemy для объектно-реляционного преобразования, а также современных подходов к организации архитектуры веб-приложений с применением паттерна Blueprint для структурирования кода.

В процессе работы над проектом были изучены и практически применены концепции аутентификации и авторизации пользователей, ролевого управления доступом к функциональным возможностям системы, работы с файловыми вложениями, формирования аналитических отчетов с агрегацией данных, экспорта информации в различные форматы, валидации пользовательского ввода, обеспечения безопасности веб-приложений, а также организации структуры проекта в соответствии с лучшими практиками разработки.

### Назначение проекта

Данный программный продукт разработан исключительно в образовательных целях и предназначен для демонстрации практического применения теоретических знаний, полученных в процессе изучения дисциплин, связанных с веб-разработкой и проектированием информационных систем. Проект может быть использован в качестве учебного материала для ознакомления с принципами построения веб-приложений на фреймворке Flask, организации работы с базами данных посредством ORM, реализации механизмов аутентификации и авторизации, а также для изучения лучших практик структурирования кода веб-приложений.

### Лицензионные условия

Настоящий программный продукт распространяется в рамках академической лицензии и может быть использован исключительно в образовательных и некоммерческих целях. Любое коммерческое использование данного программного обеспечения без явного письменного разрешения автора запрещается. Автор не несет ответственности за возможные последствия использования данного программного обеспечения в производственных системах, поскольку оно было разработано в качестве учебного проекта и не проходило тестирования на соответствие требованиям промышленной эксплуатации.

При использовании данного проекта в качестве основы для разработки собственных информационных систем или в образовательных целях рекомендуется сохранять ссылку на первоначальный источник и указывать информацию об авторе оригинального проекта в документации производных работ.

### Контактная информация и обратная связь

По всем вопросам, связанным с функционированием информационной системы, выявленными в процессе эксплуатации ошибками и недоработками, предложениями по улучшению функциональности или архитектурных решений, а также по вопросам возможности использования проекта в образовательных целях просьба обращаться к автору проекта посредством создания Issues в репозитории системы контроля версий или через контактную форму на странице проекта.

---

**Дата создания документации:** Ноябрь 2025 года

**Версия системы:** 1.0.0 (Курсовой проект)

**Статус проекта:** Демонстрационная версия для образовательных целей

---

*Данный документ представляет собой исчерпывающее руководство пользователя и разработчика информационной системы WorkoutTracker и содержит всю необходимую информацию для успешного развертывания, настройки, эксплуатации и дальнейшего развития системы в целях обеспечения максимально эффективного использования всех функциональных возможностей данной информационной системы учета и управления тренировочной деятельностью.*
