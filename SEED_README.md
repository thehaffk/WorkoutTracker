# Генерация демонстрационных данных (seed.py)

## Описание

Скрипт `seed.py` предназначен для автоматической генерации реалистичных демонстрационных данных в базе данных приложения WorkoutTracker. Использует библиотеку Faker для создания разнообразных тестовых данных.

## Требования

Перед запуском убедитесь, что установлены все зависимости:

```bash
pip install -r requirements.txt
```

Библиотека Faker уже включена в `requirements.txt` версии 28.0.0.

## Что создаёт скрипт

### 1. Пользователи (5-7 шт.)
- **1 администратор** (admin/Admin123)
  - Полный доступ ко всем функциям системы
- **2 редактора-тренера** (trainer1/Trainer123, trainer2/Trainer223)
  - Возможность создавать публичные упражнения
  - Редактирование данных в системе
- **2-4 обычных пользователя** (user1/User1Pass, user2/User2Pass и т.д.)
  - Просмотр данных и создание личных упражнений

Каждому пользователю назначаются реалистичные физические параметры:
- Возраст (18-50 лет)
- Вес (55-100 кг)
- Рост (155-195 см)
- Пол (male/female/other)

### 2. Упражнения (15-20 шт.)

Создаются упражнения для всех основных групп мышц:
- **Грудь**: Жим штанги лёжа, Жим гантелей, Отжимания и др.
- **Спина**: Становая тяга, Подтягивания, Тяга в наклоне и др.
- **Ноги**: Приседания, Жим ногами, Выпады и др.
- **Плечи**: Жим стоя, Махи гантелями и др.
- **Руки**: Подъём на бицепс, Французский жим и др.
- **Пресс**: Скручивания, Планка, Подъём ног и др.
- **Ягодицы**: Ягодичный мост, Приседания сумо и др.

Каждое упражнение включает:
- Название
- Описание техники выполнения
- Группу мышц
- Необходимое оборудование (штанга, гантели, тренажёр, без оборудования)
- Уровень сложности (beginner/intermediate/advanced)
- Флаг публичности (80% публичных, 20% личных)

### 3. Тренировки (20-30 шт.)

Генерируются тренировки за последние 3 месяца:
- Случайные даты в диапазоне 90 дней
- Различные типы: Силовая, Кардио, Смешанная, Растяжка, Функциональная
- Длительность: 30-120 минут
- Заметки к тренировкам (опционально, 30% тренировок)

### 4. Записи упражнений в тренировках (40-60 шт.)

Для каждой тренировки создаются 2-5 упражнений с реалистичными параметрами:
- **Подходы**: 1-5 шт.
- **Повторения**:
  - Для начинающих: 12-20 раз
  - Для среднего уровня: 8-15 раз
  - Для продвинутых: 4-10 раз
- **Вес**:
  - Ноги, Спина: 40-150 кг
  - Грудь, Плечи: 20-100 кг
  - Руки, Пресс: 5-40 кг
- **Длительность**: для статических упражнений (планка) - 30-180 сек
- **Дистанция**: для кардио - 1-10 км
- Заметки к упражнениям (опционально, 20%)

### 5. Файловые вложения (5-10 шт.)

Создаются пустые демонстрационные файлы различных типов:
- **Изображения**: exercise_photo_N.png/jpg/jpeg (фото упражнений)
- **Документы**: training_plan_N.pdf (планы тренировок)
- **Данные**: workout_data_N.txt/csv/json (данные тренировок)

Файлы сохраняются в директорию `static/uploads/` с уникальными UUID-именами.

## Запуск

### Базовый запуск

```bash
python seed.py
```

или

```bash
python3 seed.py
```

### Важно!

1. **Перед первым запуском** необходимо инициализировать базу данных и роли:
   ```bash
   python app.py
   ```
   Остановите приложение после создания ролей (Ctrl+C).

2. **Скрипт очищает все данные** (кроме ролей) перед генерацией новых. Будьте осторожны!

3. Убедитесь, что в `requirements.txt` присутствует `Faker==28.0.0`

## Учётные данные для входа

После запуска скрипта вы сможете войти в систему используя следующие учётные данные:

### Администратор
- **Логин**: admin
- **Пароль**: Admin123
- **Права**: Полный доступ ко всем функциям

### Тренеры (редакторы)
- **Логин**: trainer1 | **Пароль**: Trainer123
- **Логин**: trainer2 | **Пароль**: Trainer223
- **Права**: Создание и редактирование упражнений, управление данными

### Пользователи
- **Логин**: user1 | **Пароль**: User1Pass
- **Логин**: user2 | **Пароль**: User2Pass
- **Логин**: user3 | **Пароль**: User3Pass (если создан)
- **Логин**: user4 | **Пароль**: User4Pass (если создан)
- **Права**: Просмотр данных, создание личных упражнений

## Статистика

После успешного выполнения скрипт выводит подробную статистику созданных данных:
- Количество пользователей по ролям
- Количество публичных и личных упражнений
- Количество тренировок
- Количество записей упражнений в тренировках
- Количество файловых вложений

## Структура данных

```
Пользователи (5-7)
├── Администратор (1)
├── Редакторы-тренеры (2)
└── Обычные пользователи (2-4)

Упражнения (15-20)
├── Публичные (~80%)
│   ├── По группам мышц (7 групп)
│   └── Разные уровни сложности
└── Личные (~20%)

Тренировки (20-30)
├── За последние 3 месяца
├── Разные типы тренировок (5 типов)
└── Разная длительность (30-120 мин)

Записи упражнений (40-60)
├── 2-5 упражнений на тренировку
├── Реалистичные параметры (подходы, вес, повторы)
└── Опциональные заметки

Вложения (5-10)
├── Изображения (PNG, JPEG)
├── Документы (PDF)
└── Данные (TXT, CSV, JSON)
```

## Примеры использования

### Полная перегенерация данных

```bash
# 1. Остановите приложение если оно запущено
# 2. Запустите seed скрипт
python seed.py

# 3. Запустите приложение
python app.py
```

### Проверка созданных данных

После запуска скрипта можно войти в систему и проверить:
1. Список упражнений (публичные и личные)
2. Тренировки пользователей за последние 3 месяца
3. Детали выполнения упражнений в тренировках
4. Файловые вложения в директории `static/uploads/`

## Устранение проблем

### "No module named 'faker'"
```bash
pip install Faker
```

### "Роли не найдены в базе данных"
Сначала запустите `app.py` для инициализации ролей:
```bash
python app.py
# Дождитесь сообщения "Роли успешно созданы"
# Остановите приложение (Ctrl+C)
python seed.py
```

### "Permission denied" при создании файлов
Убедитесь, что директория `static/uploads/` существует и доступна для записи:
```bash
mkdir -p static/uploads
chmod 755 static/uploads
```

## Технические детали

- **Локализация**: Используется русская локаль Faker ('ru_RU')
- **База данных**: SQLite через Flask-SQLAlchemy
- **Cascade**: Все связанные данные удаляются автоматически при удалении родительских сущностей
- **Уникальность**: Имена файлов генерируются с использованием UUID для предотвращения коллизий
- **Транзакции**: Все операции выполняются в контексте транзакций БД

## Расширение функционала

Для добавления дополнительных данных отредактируйте константы в начале файла:

```python
MUSCLE_GROUPS = ['Грудь', 'Спина', 'Ноги', ...]  # Добавить группы мышц
WORKOUT_TYPES = ['Силовая', 'Кардио', ...]       # Добавить типы тренировок
```

Или измените диапазоны генерации:

```python
num_workouts = random.randint(20, 30)  # Изменить количество тренировок
num_exercises = random.randint(2, 5)   # Изменить количество упражнений на тренировку
```

## Автор

Скрипт создан для проекта WorkoutTracker - системы учёта и управления тренировками.
